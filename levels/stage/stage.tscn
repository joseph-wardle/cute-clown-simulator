[gd_scene load_steps=11 format=3 uid="uid://d0uwejejiswbo"]

[ext_resource type="PackedScene" uid="uid://wvkwyl3hcce8" path="res://game_objects/ball/ball.tscn" id="1_dkf10"]
[ext_resource type="Script" path="res://levels/stage/omni_light_3d.gd" id="1_pnnt3"]
[ext_resource type="PackedScene" uid="uid://kqjay26lo8x8" path="res://game_objects/rhythm_counter/rhythm_counter.tscn" id="2_atwpc"]
[ext_resource type="AudioStream" uid="uid://do7gvl3h4s2j" path="res://assets/audio/click.wav" id="3_3cion"]
[ext_resource type="Script" path="res://levels/stage/temporary_metronome.gd" id="4_pnnt3"]
[ext_resource type="PackedScene" uid="uid://bwliioxon2evx" path="res://menus/input_indicator/input_indicator.tscn" id="5_pnnt3"]

[sub_resource type="GDScript" id="GDScript_3cion"]
script/source = "extends SpotLight3D

func _process(delta):
	var target_node = get_node(\"../Ball\")
	if target_node:
		#global_transform.origin = target_node.global_transform.origin
		look_at(target_node.global_transform.origin)
"

[sub_resource type="BoxMesh" id="BoxMesh_dkf10"]
size = Vector3(30, 2, 2)

[sub_resource type="CylinderMesh" id="CylinderMesh_3r3al"]
top_radius = 10.0
bottom_radius = 10.0
height = 0.1

[sub_resource type="CylinderShape3D" id="CylinderShape3D_dkf10"]
height = 0.1
radius = 10.0

[node name="Stage" type="Node3D"]

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.0645, 14.4627)
fov = 26.5
far = 3959.4

[node name="SpotLight3D" type="SpotLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 10, 0)
light_energy = 30.0
shadow_enabled = true
spot_range = 15.0
spot_angle = 20.0
script = SubResource("GDScript_3cion")

[node name="1stbleacher" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.431869, -10.7632)
mesh = SubResource("BoxMesh_dkf10")

[node name="2ndbleacher" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.868036, -15.4687)
mesh = SubResource("BoxMesh_dkf10")

[node name="3rdbleacher" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.99844, -0.0558389, 0, 0.0558389, 0.99844, 0, 2.60173, -20.1908)
mesh = SubResource("BoxMesh_dkf10")

[node name="3rdbleacher2" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.28721, -25.5838)
mesh = SubResource("BoxMesh_dkf10")

[node name="OmniLight3D" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.1856, 3.13915)
light_energy = 2.664
script = ExtResource("1_pnnt3")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.541019, 0.841011, 0, -0.841011, 0.541019, 0, 4.99417, 8.27294)
light_energy = 0.232

[node name="Ball" parent="." instance=ExtResource("1_dkf10")]
transform = Transform3D(1.57555, 0, 0, 0, 1.57555, 0, 0, 0, 1.57555, 0, 1.07785, 0)

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="Ball"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.27471, 0.989468)
remote_path = NodePath("../../InputIndicator")
update_rotation = false

[node name="Platform" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 4.2)

[node name="PlatformMesh" type="MeshInstance3D" parent="Platform"]
mesh = SubResource("CylinderMesh_3r3al")
skeleton = NodePath("../..")

[node name="PlatformHitbox" type="CollisionShape3D" parent="Platform"]
shape = SubResource("CylinderShape3D_dkf10")

[node name="RhythmCounter" parent="." instance=ExtResource("2_atwpc")]

[node name="TEMPORARY_METRONOME" type="AudioStreamPlayer" parent="."]
stream = ExtResource("3_3cion")
script = ExtResource("4_pnnt3")

[node name="InputIndicator" parent="." instance=ExtResource("5_pnnt3")]
transform = Transform3D(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3.08623, 1.55896)

[connection signal="beat" from="RhythmCounter" to="TEMPORARY_METRONOME" method="_on_rhythem_counter_beat"]
[connection signal="input_result" from="RhythmCounter" to="InputIndicator" method="_on_rhythm_counter_input_result"]
